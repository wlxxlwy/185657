<!DOCTYPE html>
<!-- saved from url=(0047)http://www.cnblogs.com/liujie037/p/5792658.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园</title>
<link type="text/css" rel="stylesheet" href="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/bundle-AnotherEon001.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/bundle-AnotherEon001-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/liujie037/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/liujie037/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/liujie037/wlwmanifest.xml">
<script async="" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/analytics.js"></script><script type="text/javascript" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/encoder.js"></script><script src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'liujie037', cb_enable_mathjax=false;var isLogined=true;</script>
<script src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<div id="wrapper">
<div id="header">

<div id="top">
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/liujie037/">liujie037</a></h1>
<div id="subtitle"></div>
</div>
<div id="sub"><div id="blog_stats">
<div class="BlogStats">随笔 - 40, 文章 - 9, 评论 - 2, 引用 - 0</div>
</div></div>



</div>
<div id="main_container">
<div id="main_content">
<div id="content">
	
<div id="post_detail">
	<div class="post">
		<h2>
			<a id="cb_post_title_url" href="http://www.cnblogs.com/liujie037/p/5792658.html">Activiti工作流学习-----基于5.19.0版本(5)</a>
		</h2>
		<div class="postbody">
		<div id="cnblogs_post_body" class="blogpost-body"><h3>五、与Spring集成</h3>
<p>实际项目中一般都有Spring的身影，与Spring集成使得Activiti的实用性得到提高。activiti和Spring整合需要activiti-spring的jar在类路径下面，整合类是：org.activiti.spring.ProcessEngineFactoryBean，它将加载配置对象和产生流程引擎对象。例如下面代码：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.SpringProcessEngineConfiguration"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
    ...
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.ProcessEngineFactoryBean"</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="processEngineConfiguration"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4>5.1 事务的配置</h4>
<p>&nbsp;在xml配置SpringProcessEngineConfiguration的dataSource的时候，实际上工作流使用的是org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy，它是dataSource的一个代理类，它的作用就是确定从dataSource中获取的数据库连接已经绑定了Spring的事务，所以你无需在进行配置dataSource的代理类，以防失去TransactionAwareDataSourceProxy的效果。</p>
<p>确保在配置中没有配置<strong><code>TransactionAwareDataSourceProxy，</code></strong><code>因为它在Spring的事务中不会有作用(比如DataSourceTransactionManager和JPATransactionManager不需要代理的dataSource)。</code></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre deep="9"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans </span><span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans"</span>
<span style="color: #008080;"> 2</span> <span style="color: #ff0000;">       xmlns:context</span><span style="color: #0000ff;">="http://www.springframework.org/schema/context"</span>
<span style="color: #008080;"> 3</span> <span style="color: #ff0000;">       xmlns:tx</span><span style="color: #0000ff;">="http://www.springframework.org/schema/tx"</span>
<span style="color: #008080;"> 4</span> <span style="color: #ff0000;">       xmlns:xsi</span><span style="color: #0000ff;">="http://www.w3.org/2001/XMLSchema-instance"</span>
<span style="color: #008080;"> 5</span> <span style="color: #ff0000;">       xsi:schemaLocation</span><span style="color: #0000ff;">="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">                           http://www.springframework.org/schema/tx      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="dataSource"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.springframework.jdbc.datasource.SimpleDriverDataSource"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="driverClass"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="org.h2.Driver"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="url"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="jdbc:h2:mem:activiti;DB_CLOSE_DELAY=1000"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="username"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="sa"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="password"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">=""</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">14</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="transactionManager"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">17</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="dataSource"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="dataSource"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">18</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.SpringProcessEngineConfiguration"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">21</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="dataSource"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="dataSource"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">22</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="transactionManager"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="transactionManager"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">23</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="databaseSchemaUpdate"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="true"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">24</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="jobExecutorActivate"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="false"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">25</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.ProcessEngineFactoryBean"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">28</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="processEngineConfiguration"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">29</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="repositoryService"</span><span style="color: #ff0000;"> factory-bean</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> factory-method</span><span style="color: #0000ff;">="getRepositoryService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">32</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="runtimeService"</span><span style="color: #ff0000;"> factory-bean</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> factory-method</span><span style="color: #0000ff;">="getRuntimeService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">33</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="taskService"</span><span style="color: #ff0000;"> factory-bean</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> factory-method</span><span style="color: #0000ff;">="getTaskService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">34</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="historyService"</span><span style="color: #ff0000;"> factory-bean</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> factory-method</span><span style="color: #0000ff;">="getHistoryService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">35</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="managementService"</span><span style="color: #ff0000;"> factory-bean</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> factory-method</span><span style="color: #0000ff;">="getManagementService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">36</span> 
<span style="color: #008080;">37</span> ...</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;在其他的Spring配置文件中配置其他的，这样功能清晰，后期容易维护，例如：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #000000;">  ...
</span><span style="color: #008080;"> 3</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">tx:annotation-driven </span><span style="color: #ff0000;">transaction-manager</span><span style="color: #0000ff;">="transactionManager"</span><span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="userBean"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.test.UserBean"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="runtimeService"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="runtimeService"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;"> 7</span>   <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="printer"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.test.Printer"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在Spring中启动容器(application context)的方法有很多，比如下面利用类路径加载配置文件：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> ClassPathXmlApplicationContext applicationContext = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ClassPathXmlApplicationContext(
</span><span style="color: #008080;">2</span>     "org/activiti/examples/spring/SpringTransactionIntegrationTest-context.xml");</pre>
</div>
<p>而在单元测试中，我们可以这样：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> @ContextConfiguration("classpath:org/activiti/spring/test/transaction/SpringTransactionIntegrationTest-context.xml")</pre>
</div>
<p>在Spring的IOC容器中我们可以轻易的获取我们需要的工作流的Service,ProcessEngineFactoryBean实现了对这些Service的Propagation.REQUIRED的事务级别的控制，例如下面这段代码：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;">1</span> RepositoryService repositoryService =
<span style="color: #008080;">2</span>   (RepositoryService) applicationContext.getBean("repositoryService"<span style="color: #000000;">);
</span><span style="color: #008080;">3</span> String deploymentId =<span style="color: #000000;"> repositoryService
</span><span style="color: #008080;">4</span> <span style="color: #000000;">  .createDeployment()
</span><span style="color: #008080;">5</span>   .addClasspathResource("org/activiti/spring/test/hello.bpmn20.xml"<span style="color: #000000;">)
</span><span style="color: #008080;">6</span> <span style="color: #000000;">  .deploy()
</span><span style="color: #008080;">7</span>   .getId();</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在其他方面也有同样的效果，在下面这种情况中，Spring的事务是环绕在serBean.hello()中，这时Activiti的Service会加入事务当中。</p>
<div class="cnblogs_code">
<pre>UserBean userBean = (UserBean) applicationContext.getBean("userBean"<span style="color: #000000;">);
userBean.hello();</span></pre>
</div>
<p>而在具体的UserBean中，我们通过前面的配置是注入了RuntimeService：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">public class UserBean {
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #000000;">  /** Spring注入 */
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">  private RuntimeService runtimeService;
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> <span style="color: #000000;">  @Transactional
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">  public void hello() {
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    // here you can do transactional stuff in your domain model
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    // and it will be combined in the same transaction as
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    // the startProcessInstanceByKey to the Activiti RuntimeService
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    runtimeService.startProcessInstanceByKey("helloProcess");
</span><span style="color: #008080;">12</span> <span style="color: #000000;">  }
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> <span style="color: #000000;">  public void setRuntimeService(RuntimeService runtimeService) {
</span><span style="color: #008080;">15</span> <span style="color: #000000;">    this.runtimeService = runtimeService;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">  }
</span><span style="color: #008080;">17</span> }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h3>5.2 Spring中使用表达式</h3>
<p>&nbsp;在Spring的配置中也有像activiti的表达式使用，有可能表达式中的bean有限制，在使用Map配置发现没有bean可用，在SpringProcessEngineConfiguration的beans属性配置Map时，如果里面的bean不存在也会通过，只不过bean为空而已。下面这段代码配置beans属性：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_867097" class="syntaxhighlighter  html"><div class="toolbar"><span><a href="http://www.cnblogs.com/liujie037/p/5792658.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html plain">&lt;</code><code class="html keyword">bean</code> <code class="html plain">id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration"&gt;</code></div><div class="line number2 index1 alt1"><code class="html spaces">&nbsp;&nbsp;</code><code class="html plain">...</code></div><div class="line number3 index2 alt2"><code class="html spaces">&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">property</code> <code class="html plain">name="beans"&gt;</code></div><div class="line number4 index3 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">map</code><code class="html plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;</code><code class="html keyword">entry</code> <code class="html plain">key="printer" value-ref="printer" /&gt;</code></div><div class="line number6 index5 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html plain">&lt;/</code><code class="html keyword">map</code><code class="html plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="html spaces">&nbsp;&nbsp;</code><code class="html plain">&lt;/</code><code class="html keyword">property</code><code class="html plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="html plain">&lt;/</code><code class="html keyword">bean</code><code class="html plain">&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="html plain">&lt;</code><code class="html keyword">bean</code> <code class="html plain">id="printer" class="org.activiti.examples.spring.Printer" /&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>现在我们可以在xxxbpmn.xml文件中可以直接使用printer了：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">definitions </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="definitions"</span><span style="color: #0000ff;">&gt;</span>

  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">process </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="helloProcess"</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">startEvent </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="start"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">sequenceFlow </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="flow1"</span><span style="color: #ff0000;"> sourceRef</span><span style="color: #0000ff;">="start"</span><span style="color: #ff0000;"> targetRef</span><span style="color: #0000ff;">="print"</span> <span style="color: #0000ff;">/&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">serviceTask </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="print"</span><span style="color: #ff0000;"> activiti:expression</span><span style="color: #0000ff;">="#{printer.printMessage()}"</span> <span style="color: #0000ff;">/&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">sequenceFlow </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="flow2"</span><span style="color: #ff0000;"> sourceRef</span><span style="color: #0000ff;">="print"</span><span style="color: #ff0000;"> targetRef</span><span style="color: #0000ff;">="end"</span> <span style="color: #0000ff;">/&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">endEvent </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="end"</span> <span style="color: #0000ff;">/&gt;</span>

  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">process</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">definitions</span><span style="color: #0000ff;">&gt;</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>而我们的Printer类代码：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">public class Printer {

  public void printMessage() {
    System.out.println("hello world");
  }
}</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在Spring中配置：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
  ...

  </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="printer"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.examples.spring.Printer"</span> <span style="color: #0000ff;">/&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h3>5.3 使用Spring实现自动发布</h3>
<p>　自动发布流程定义是整合Spring后的功能，在流程引擎被创建的时候就会将spring配置的资源加载发布。为了防止重复发布，整合的jar中添加了过滤功能，只有加载的资源真正的被改变，才会重新发布。好处在于一些场景(junit 测试)下，Spring容器经常重启。</p>
<p>例如下面配置，其中deploymentResources属性设置资源路径。</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.SpringProcessEngineConfiguration"</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
  ...
  </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="deploymentResources"</span><span style="color: #ff0000;">
    value</span><span style="color: #0000ff;">="classpath*:/org/activiti/spring/test/autodeployment/autodeploy.*.bpmn20.xml"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.spring.ProcessEngineFactoryBean"</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="processEngineConfiguration"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="processEngineConfiguration"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在上面的配置当中，配置路径的所有资源将会进行匹配，然后将其资源发布到流程引擎中去。这种过滤手段一定程度上避免了一个资源文件的修改引发所有的流程定义资源文件再次发布的可能性。在一些场景并不会这样，例如你发布的资源中仅仅其中一个是修改的，但是发布是将所有过滤后的都发布出去。activiti提供了自定义发布的功能，在bean节点：SpringProcessEngineConfiguration添加属性deploymentMode，目前它有三种取值策略：</p>
<ul>
<li>default:没有定义deploymentMode时，系统默认设置为default.</li>
<li>single-resource:每个资源文件单独发布，如果资源文件改变，单独发布。</li>
<li>resource-parent-folder：每个资源文件夹单独发布，也就是说在不同文件夹下的资源文件将会以不同的文件夹为单位，进行防重复发布功能的发布。它介于default(批量发布)和single-resource(单个发布)之间。</li>
</ul>
<p>以上就是所有的deploymentMode取值，如果你觉得不能够满足你的需求，你可以继承SpringProcessEngineConfiguration，重写其中的getAutoDeploymentStrategy(String deploymentMode)方法实现自己的功能。</p>
<h4>5.4 在Spring环境的单元测试</h4>
<p>&nbsp;前面介绍过activiti自己提供的测试方法，而在Spring中进行单元测试的话，可以这样：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:org/activiti/spring/test/junit4/springTypicalUsageTest-context.xml")
public class MyBusinessProcessTest {

  @Autowired
  private RuntimeService runtimeService;

  @Autowired
  private TaskService taskService;

  @Autowired
  @Rule
  public ActivitiRule activitiSpringRule;

  @Test
  @Deployment
  public void simpleProcessTest() {
    runtimeService.startProcessInstanceByKey("simpleProcess");
    Task task = taskService.createTaskQuery().singleResult();
    assertEquals("My Task", task.getName());

    taskService.complete(task.getId());
    assertEquals(0, runtimeService.createProcessInstanceQuery().count());

  }
}</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>不过值得注意的是你测试之前需要将org.activiti.engine.test.ActivitiRule配置注册到Spring的文件中，它会在上述例子中自动注入到测试中。</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="activitiRule"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="org.activiti.engine.test.ActivitiRule"</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="processEngine"</span><span style="color: #ff0000;"> ref</span><span style="color: #0000ff;">="processEngine"</span> <span style="color: #0000ff;">/&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>目前本人使用Spring-Boot不多(就没怎么用)，至于Spring-Boot和Activiti的集成，感兴趣的同学可以自己去了解，反正我觉得太过于封装的东西不要太过于追求。</p>
<h2>六、 工作流动态发布</h2>
<p>将流程定义等资源文件以zip压缩格式打包后，activiti引擎将会去扫描含有.bpmn20.xml 或者 .bpmn扩展名的文件，这些文件将会被识别解析。但注意不要将java文件以及编译后文件也加到打包文件中，流程引擎只会加载当前类路径下面的类文件，同时加到打包文件的class文件也不会被加到类路径下面去。</p>
<p>这时后台需要代码实现发布功能，比如这样：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">String barFileName = "path/to/process-one.bar";
ZipInputStream inputStream = new ZipInputStream(new FileInputStream(barFileName));

repositoryService.createDeployment()
    .name("process-one.bar")
    .addZipInputStream(inputStream)
    .deploy();</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在官方提供的Activiti Explorer项目中也有动态发布功能集成，将其项目部署到tomcat后，我使用了管理员Kermit登录系统，点击管理--&gt;部署包---&gt;添加新的部署包</p>
<p><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/672697-20160821184834823-843033049.png" alt=""></p>
<p>弹出一个上传文件的弹出框：</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/672697-20160821185127120-1821097292.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;而我们资源打包文件引用到的类需要放到流程引擎的classpath下面.</p>
<h4>6.1 流程定义的版本</h4>
<p>BPMN是没有版本的概念的，bpmn文件交给版本控制软件(比如SVN,git,Mercurial)进行管理，这样子设计方便我们对项目的集中管理，而存入数据库的流程定义的版本是工作流在发布期间标识的版本。每一个流程定义写进数据库需要初始化这些属性：key, version, name 和id。</p>
<p>id的值来自流程定义文件的key值。name值来自于流程定义文件的name值，第一次发布默认version是1，随后的发布会将版本递增。id的取值是{流程定义的key值}:{流程定义的版本}:{随机数}，而这个随机数在分布式环境中也是保证是唯一的。</p>
<p>比如下面这个流程定义文件：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">definitions </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="myDefinitions"</span> <span style="color: #0000ff;">&gt;</span>
<span style="color: #008080;">2</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">process </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="myProcess"</span><span style="color: #ff0000;"> name</span><span style="color: #0000ff;">="My important process"</span> <span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>发布过后在数据库中保存的数据就是这样：</p>
<table class="tableblock frame-all grid-all spread">
<thead>
<tr><th class="tableblock halign-left valign-top">id</th><th class="tableblock halign-left valign-top">key</th><th class="tableblock halign-left valign-top">name</th><th class="tableblock halign-left valign-top">version</th></tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess:1:676</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">1</p>
</td>
</tr>
</tbody>
</table>
<p><span style="line-height: 1.5;">假使我们重新发布了流程定义文件，但文件中id的值并没有修改,数据库中的数据变成了这样子：</span></p>
<table class="tableblock frame-all grid-all spread" style="height: 84px; width: 409px;">
<tbody>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess:1:676</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">1</p>
</td>
</tr>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess:2:870</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">2</p>
</td>
</tr>
</tbody>
</table>
<p>如果我们修改了id,再次发布数据库数据就成这样子：</p>
<table class="tableblock frame-all grid-all spread">
<thead>
<tr><th class="tableblock halign-left valign-top">id</th><th class="tableblock halign-left valign-top">key</th><th class="tableblock halign-left valign-top">name</th><th class="tableblock halign-left valign-top">version</th></tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess:1:676</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">1</p>
</td>
</tr>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess:2:870</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">2</p>
</td>
</tr>
<tr>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myNewProcess:1:1033</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">myNewProcess</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">My important process</p>
</td>
<td class="tableblock halign-left valign-top">
<p class="tableblock">1</p>
</td>
</tr>
</tbody>
</table>
<p>可以看出发布区分新的流程定义会根据key进行判断，Activiti仅仅会根据key值的不同进行区分，所以流程版本变成了1。</p>
<h4>6.2 添加流程图发布</h4>
<p>发布过程中可以添加流程图进去， 流程图会被视为资源而保存起来，流程图主要用在Activiti Explorer的页面中显示给用户查看。假定我们有一个流程的xml文件在类路径下面，activiti使用命名规则进行获取流程图：</p>
<ul>
<li>如果流程图已经存在并且使用流程定义文件名作为图片名称，当然后缀名是git、jpg、png都可以，将会被获取加载，如果有其他名称的图片文件，将会被忽视。</li>
<li>如果图片文件在当前流程定义文件的同一个目录里面不存在。</li>
</ul>
<p>人工添加流程图代码实现就是如下所示：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #000000;">repositoryService.createDeployment()
</span><span style="color: #008080;">2</span> <span style="color: #000000;">  .name("expense-process.bar")
</span><span style="color: #008080;">3</span> <span style="color: #000000;">  .addClasspathResource("org/activiti/expenseProcess.bpmn20.xml")
</span><span style="color: #008080;">4</span> <span style="color: #000000;">  .addClasspathResource("org/activiti/expenseProcess.png")
</span><span style="color: #008080;">5</span>   .deploy();</pre>
</div>
<p>取出图片资源代码实现：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;">1</span> <span style="color: #000000;">ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()
</span><span style="color: #008080;">2</span> <span style="color: #000000;">  .processDefinitionKey("expense")
</span><span style="color: #008080;">3</span> <span style="color: #000000;">  .singleResult();
</span><span style="color: #008080;">4</span> 
<span style="color: #008080;">5</span> <span style="color: #000000;">String diagramResourceName = processDefinition.getDiagramResourceName();
</span><span style="color: #008080;">6</span> <span style="color: #000000;">InputStream imageStream = repositoryService.getResourceAsStream(
</span><span style="color: #008080;">7</span>     processDefinition.getDeploymentId(), diagramResourceName);</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>如果bpmn文件中含有必要的信息，activiti将会生成流程图片，如果不想生成可以设置：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property </span><span style="color: #ff0000;">name</span><span style="color: #0000ff;">="createDiagramOnDeploy"</span><span style="color: #ff0000;"> value</span><span style="color: #0000ff;">="false"</span> <span style="color: #0000ff;">/&gt;</span></pre>
</div>
<p>bpmn文件可以被用户进行自定义分类，帮助用户自己识别使用，在bpmn文件的：&lt;definitions …​ targetNamespace="yourCategory" 可以设置。</p>
<p>如果使用代码实现这个功能可以这样：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #000000;">repositoryService
</span><span style="color: #008080;">2</span> <span style="color: #000000;">    .createDeployment()
</span><span style="color: #008080;">3</span> <span style="color: #000000;">    .category("yourCategory")
</span><span style="color: #008080;">4</span> <span style="color: #000000;">    ...
</span><span style="color: #008080;">5</span>     .deploy();</pre>
</div>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/liujie037/category/689421.html" target="_blank">javaweb学习笔记</a></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/liujie037/tag/java/">java</a>, <a href="http://www.cnblogs.com/liujie037/tag/activiti/">activiti</a>, <a href="http://www.cnblogs.com/liujie037/tag/bpmn/">bpmn</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(5792658,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" href="javascript:void(0);">已关注</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/liujie037/" target="_blank"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/sample_face.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/liujie037/">liujie037</a><br>
            <a href="http://home.cnblogs.com/u/liujie037/followees">关注 - 2</a><br>
            <a href="http://home.cnblogs.com/u/liujie037/followers">粉丝 - 9</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                我在关注他 <a href="javascript:void(0);" onclick="unfollow(&#39;da0d9364-ae3c-e411-b908-9dcfd8948a71&#39;);return false;">取消关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(5792658,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">1</span>
    </div>
    <div class="buryit" onclick="votePost(5792658,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/liujie037/p/5790698.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/liujie037/p/5790698.html" title="发布于2016-08-21 02:00">Activiti工作流学习-----基于5.19.0版本(4)</a><br><a href="http://www.cnblogs.com/liujie037/p/5796243.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/liujie037/p/5796243.html" title="发布于2016-08-22 23:50">Activiti工作流学习-----基于5.19.0版本(6)</a><br></div>
</div>


		</div>
		<p class="postfoot">
			posted on <span id="post-date">2016-08-21 23:11</span> <a href="http://www.cnblogs.com/liujie037/">liujie037</a> 阅读(<span id="post_view_count">1465</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=5792658" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/liujie037/p/5792658.html#" onclick="AddToWz(5792658);return false;">收藏</a>
		</p>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=198104,cb_entryId=5792658,cb_blogApp=currentBlogApp,cb_blogUserGuid='da0d9364-ae3c-e411-b908-9dcfd8948a71',cb_entryCreatedDate='2016/8/21 23:11:00';loadViewCount(cb_entryId);var cb_postType=1;</script>
	
	</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="http://www.cnblogs.com/liujie037/p/5792658.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/liujie037/p/5792658.html#top">返回顶部</a></div>
<div id="comment_form_container">
<div id="commentform_title">发表评论</div>
<span id="tip_comment" style="color:Red"></span>
<p>
昵称：<input type="text" id="tbCommentAuthor" class="author" disabled="disabled" size="50" value="射禾木">
</p>
<div class="commentbox_main">
<div class="commentbox_title">
<div class="commentbox_title_left">评论内容：</div>
<div class="commentbox_title_right">
<img id="ubb_quote" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/quote.gif" alt="引用" title="添加引用" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;quote&#39;)">
<img id="ubb_bold" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/b.png" alt="粗体" title="添加粗体" onclick="insertUBB(&#39;tbCommentBody&#39;,&#39;b&#39;)">
<img id="ubb_url" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/lk.png" alt="链接" title="添加链接" onclick="insertUbbUrl(&#39;tbCommentBody&#39;)">
<img id="ubb_indent" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/indent.png" alt="缩进" title="添加首行缩进" onclick="insertIndent(&#39;tbCommentBody&#39;)">
<img id="ubb_code" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/InsertCode.gif" alt="代码" title="添加代码" onclick="insertUbbCode()">
<img id="ubb_img" class="comment_icon" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/img.gif" alt="图片" title="上传图片" onclick="OpenImageUploadWindow();">
</div>
</div>
<div class="clear"></div>
<textarea id="tbCommentBody" class="comment_textarea"></textarea>
</div>
<p id="commentbox_opt">
<input id="btn_comment_submit" type="button" class="comment_btn" value="提交评论">
<span id="span_comment_canceledit" style="display:none"><a href="javascript:void(0);" onclick="return CancelCommentEdit()">不改了</a></span>
<a href="javascript:void(0);" onclick="return logout();">退出</a>
        <a id="commentbox_opt_sub" href="javascript:void(0);" title="订阅后有新评论时会邮件通知您" onclick="commentManager.Subscribe()">订阅评论</a>
</p>
<div id="tip_comment2" style="color:Red"></div>
<p>
[Ctrl+Enter快捷键提交]
</p>
<div style="display:none">
<span id="comment_edit_id"></span><span id="span_parentcomment_id"></span>
<span id="span_parent_id"></span>
<span id="span_comment_replyto"></span>
<span id="span_comment_posted"></span>
</div>
</div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】超50万VC++源码: 大型工控、组态\仿真、建模CAD源码2018！</a><br><a href="https://cloud.tencent.com/developer/support-plan?fromSource=gwzcw.710852.710852.710852" target="_blank">【推荐】加入腾讯云自媒体扶持计划，免费领取域名&amp;服务器</a><br><a href="https://group.cnblogs.com/topic/78343.html" target="_blank">【福利】限时领取，H3 BPM给你发年终奖</a><br></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"><a href="http://www.h3bpm.net/" target="_blank"><img width="300" height="250" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/24442-20171226125601900-422637433.jpg" alt="h3bpm 活动"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="https://news.cnblogs.com/n/586625/" target="_blank">英媒：腾讯有意向缅甸社交网站MySquar投资</a><br> ·  <a href="https://news.cnblogs.com/n/586628/" target="_blank">构筑“掩体” 携程推动同程艺龙合并</a><br> ·  <a href="https://news.cnblogs.com/n/586624/" target="_blank">ofo“撕开”出海突破口：中国企业全球化新样本</a><br> ·  <a href="https://news.cnblogs.com/n/586626/" target="_blank">空降兵连续离职，战略再次动荡，迷茫的联想移动何时能找到方向？</a><br> ·  <a href="https://news.cnblogs.com/n/586629/" target="_blank">Intel/AMD合体CPU性能曝光：图形比GTX 1060快13%</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"><a href="http://click.aliyun.com/m/34770/" target="_blank"><img width="468" height="60" src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/24442-20171208101900738-116140477.jpg" alt="阿里云C2-1208"></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/585502/" target="_blank">步入云计算</a><br> ·  <a href="http://kb.cnblogs.com/page/531409/" target="_blank">以操作系统的角度述说线程与进程</a><br> ·  <a href="http://kb.cnblogs.com/page/141729/" target="_blank">软件测试转型之路</a><br> ·  <a href="http://kb.cnblogs.com/page/177402/" target="_blank">门内门外看招聘</a><br> ·  <a href="http://kb.cnblogs.com/page/112506/" target="_blank">大道至简，职场上做人做事做管理</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


</div>
</div>
<div id="leftmenu">


<h3>导航</h3>
<ul>
<li>
<a id="blog_nav_sitehome" href="http://www.cnblogs.com/">博客园</a></li>
<li>
<a id="blog_nav_myhome" class="two_words" href="http://www.cnblogs.com/liujie037/">首页</a></li>
<li>
<a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li>
<a id="blog_nav_contact" accesskey="9" class="two_words" rel="nofollow" href="https://msg.cnblogs.com/send/liujie037">联系</a></li>
<li>
<a id="blog_nav_rss" class="two_words" href="http://www.cnblogs.com/liujie037/rss">订阅</a>
<a id="blog_nav_rss_image" href="http://www.cnblogs.com/liujie037/rss"><img src="./Activiti工作流学习-----基于5.19.0版本(5) - liujie037 - 博客园_files/xml.gif" alt="订阅"></a>
</li>
<li>
<a id="blog_nav_admin" class="two_words" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>

<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2017/12/01&#39;);return false;">&lt;</a></td><td align="center">2018年1月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/02/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td class="CalWeekendDay" align="center">6</td></tr><tr><td class="CalTodayDay" align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td align="center">11</td><td align="center">12</td><td class="CalWeekendDay" align="center">13</td></tr><tr><td class="CalWeekendDay" align="center">14</td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td align="center">18</td><td align="center">19</td><td class="CalWeekendDay" align="center">20</td></tr><tr><td class="CalWeekendDay" align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td align="center">25</td><td align="center">26</td><td class="CalWeekendDay" align="center">27</td></tr><tr><td class="CalWeekendDay" align="center">28</td><td align="center">29</td><td align="center">30</td><td align="center">31</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td></tr><tr><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td><td class="CalOtherMonthDay" align="center">9</td><td class="CalOtherMonthDay" align="center">10</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
<meta name="vs_showGrid" content="False">

<h3>公告</h3>
<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/liujie037/">liujie037</a><br>园龄：<a href="https://home.cnblogs.com/u/liujie037/" title="入园时间：2014-09-15">3年3个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/liujie037/followers/">9</a><br>关注：<a href="https://home.cnblogs.com/u/liujie037/followees/">2</a><div id="p_b_follow">已关注 <a href="javascript:void(0);" onclick="unfollow(&#39;da0d9364-ae3c-e411-b908-9dcfd8948a71&#39;)">-取消</a></div></div></div><script type="text/javascript">loadBlogNews();</script>

<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/liujie037/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/liujie037/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/liujie037/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/liujie037/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/liujie037/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div></div><div id="sidebar_toptags" class="sidebar-block">
<h3 class="catListTitle">我的标签</h3>
<div id="MyTag">
<ul>
<li><a href="http://www.cnblogs.com/liujie037/tag/java/">java</a>(10)</li><li><a href="http://www.cnblogs.com/liujie037/tag/bpmn/">bpmn</a>(8)</li><li><a href="http://www.cnblogs.com/liujie037/tag/activiti/">activiti</a>(8)</li><li><a href="http://www.cnblogs.com/liujie037/tag/JasperReport%20%20iReport%20%20%20PDF%20%20%20jasper%20%20jrxml/">JasperReport  iReport   PDF   jasper  jrxml</a>(2)</li><li><a href="http://www.cnblogs.com/liujie037/tag/%E8%BF%90%E7%AE%97%E7%AC%A6/">运算符</a>(2)</li><li><a href="http://www.cnblogs.com/liujie037/tag/mysql/">mysql</a>(2)</li><li><a href="http://www.cnblogs.com/liujie037/tag/pdf/">pdf</a>(1)</li><li><a href="http://www.cnblogs.com/liujie037/tag/POI/">POI</a>(1)</li><li><a href="http://www.cnblogs.com/liujie037/tag/python%E7%9A%84%E4%BB%8B%E7%BB%8D/">python的介绍</a>(1)</li><li><a href="http://www.cnblogs.com/liujie037/tag/Servlet/">Servlet</a>(1)</li><li><a href="http://www.cnblogs.com/liujie037/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
		<h3>随笔分类</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/liujie037/category/689411.html">c语言学习笔记(17)</a></li>
			
				<li><a id="CatList_LinkList_0_Link_1" href="http://www.cnblogs.com/liujie037/category/791015.html">javaWeb服务器笔记(1)</a></li>
			
				<li><a id="CatList_LinkList_0_Link_2" href="http://www.cnblogs.com/liujie037/category/689421.html">javaweb学习笔记(8)</a></li>
			
				<li><a id="CatList_LinkList_0_Link_3" href="http://www.cnblogs.com/liujie037/category/689420.html">java基础学习笔记</a></li>
			
				<li><a id="CatList_LinkList_0_Link_4" href="http://www.cnblogs.com/liujie037/category/689422.html">SSH学习笔记</a></li>
			
				<li><a id="CatList_LinkList_0_Link_5" href="http://www.cnblogs.com/liujie037/category/689423.html">数据库学习笔记</a></li>
			
				<li><a id="CatList_LinkList_0_Link_6" href="http://www.cnblogs.com/liujie037/category/739422.html">图表学习笔记(5)</a></li>
			
				</ul>
			
	
		<h3>随笔档案</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_1_Link_0" href="http://www.cnblogs.com/liujie037/archive/2016/09.html">2016年9月 (1)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_1" href="http://www.cnblogs.com/liujie037/archive/2016/08.html">2016年8月 (7)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_2" href="http://www.cnblogs.com/liujie037/archive/2016/06.html">2016年6月 (1)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_3" href="http://www.cnblogs.com/liujie037/archive/2016/02.html">2016年2月 (5)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_4" href="http://www.cnblogs.com/liujie037/archive/2015/09.html">2015年9月 (1)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_5" href="http://www.cnblogs.com/liujie037/archive/2015/05.html">2015年5月 (19)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_6" href="http://www.cnblogs.com/liujie037/archive/2015/03.html">2015年3月 (1)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_7" href="http://www.cnblogs.com/liujie037/archive/2014/11.html">2014年11月 (3)</a></li>
			
				<li><a id="CatList_LinkList_1_Link_8" href="http://www.cnblogs.com/liujie037/archive/2014/09.html">2014年9月 (2)</a></li>
			
				</ul>
			
	
		<h3>文章分类</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_2_Link_0" href="http://www.cnblogs.com/liujie037/category/627940.html">XML学习笔记</a></li>
			
				</ul>
			
	</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/liujie037/p/5799905.html#3496776">1. Re:Activiti工作流学习-----基于5.19.0版本(7)</a></li>
        <li class="recent_comment_body">mark。</li>
        <li class="recent_comment_author">--muki</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/liujie037/p/4496910.html#3221683">2. Re:第一个C语言程序</a></li>
        <li class="recent_comment_body">像早上的味道。</li>
        <li class="recent_comment_author">--_Zhuqy</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/liujie037/p/5799905.html">1. Activiti工作流学习-----基于5.19.0版本(7)(3291)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/4842512.html">2. 使用POI插件，提取导出excel的工具类(3208)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5790698.html">3. Activiti工作流学习-----基于5.19.0版本(4)(2909)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5176486.html">4. 利用程序将.jrxml导出为.jasper文件并用PDF显示(2)(2030)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5778514.html">5. Activiti工作流学习-----基于5.19.0版本(2)(1733)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<h3 class="catListTitle">评论排行榜</h3>
<div class="RecentComment" id="TopCommentsPosts">
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/liujie037/p/4496910.html">1. 第一个C语言程序(1)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5799905.html">2. Activiti工作流学习-----基于5.19.0版本(7)(1)</a></li></ul></div>
</div></div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/liujie037/p/3976373.html">1. 用IO流拷贝歌曲(1)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5807521.html">2. Activiti工作流学习-----基于5.19.0版本(8)(1)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5799905.html">3. Activiti工作流学习-----基于5.19.0版本(7)(1)</a></li><li><a href="http://www.cnblogs.com/liujie037/p/5792658.html">4. Activiti工作流学习-----基于5.19.0版本(5)(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>

</div>
</div>
<div class="clear"></div>
<div id="footer">

<p id="footer">
	Powered by: 
	<br>
	
	<a id="Footer1_Hyperlink3" name="Hyperlink1" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © liujie037
</p>
</div>
</div>



<div style="position: static; display: none; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px;"><div id="trans-tooltip"><div id="tip-left-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-top.png&quot;);"></div><div id="tip-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-top.png&quot;) repeat-x;"></div><div id="tip-right-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-top.png&quot;);"></div><div id="tip-right" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right.png&quot;) repeat-y;"></div><div id="tip-right-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-bottom.png&quot;);"></div><div id="tip-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-bottom.png&quot;) repeat-x;"></div><div id="tip-left-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-bottom.png&quot;);"></div><div id="tip-left" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left.png&quot;);"></div><div id="trans-content"></div></div><div id="tip-arrow-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-bottom.png&quot;);"></div><div id="tip-arrow-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-top.png&quot;);"></div></div></body></html>